(function(n,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof module==="object"&&module.exports){module.exports=t()}else{n._=t()}})(this,function(){var n={};if(typeof window==="object"&&window._)n=window._;var t=n.isUndef=function(){function n(n){return n===void 0}return n}();var e=n.inherits=function(){var n=Object.create;function t(){}function e(e,r){if(n)return e.prototype=n(r.prototype);t.prototype=r.prototype;e.prototype=new t}return e}();var r=n.has=function(){var n=Object.prototype.hasOwnProperty;function t(t,e){return n.call(t,e)}return t}();var i=n.noop=function(){function n(){}return n}();var o=n.isObj=function(){function n(n){var t=typeof n;return!!n&&(t==="function"||t==="object")}return n}();var u=n.allKeys=function(){function n(n){var t=[],e;for(e in n)t.push(e);return t}return n}();var a=n.idxOf=function(){function n(n,t,e){return Array.prototype.indexOf.call(n,t,e)}return n}();var f=n.keys=function(n){n=Object.keys||function(n){var t=[],e;for(e in n){if(r(n,e))t.push(e)}return t};return n}({});var c=n.identity=function(){function n(n){return n}return n}();var s=n.objToStr=function(){var n=Object.prototype.toString;function t(t){return n.call(t)}return t}();var l=n.isArr=function(n){n=Array.isArray||function(n){return s(n)==="[object Array]"};return n}({});var p=n.isFn=function(){function n(n){var t=s(n);return t==="[object Function]"||t==="[object GeneratorFunction]"}return n}();var v=n.isStr=function(){function n(n){return s(n)==="[object String]"}return n}();var d=n.isNum=function(){function n(n){return s(n)==="[object Number]"}return n}();var h=n.isArrLike=function(){var n=Math.pow(2,53)-1;function t(t){if(!r(t,"length"))return false;var e=t.length;return d(e)&&e>=0&&e<=n&&!p(t)}return t}();var m=n.each=function(){function n(n,t,e){var r,i;if(h(n)){for(r=0,i=n.length;r<i;r++)t.call(e,n[r],r,n)}else{var o=f(n);for(r=0,i=o.length;r<i;r++){t.call(e,n[o[r]],o[r],n)}}return n}return n}();var y=n.createAssigner=function(){function n(n,e){return function(r){m(arguments,function(i,o){if(o===0)return;var u=n(i);m(u,function(n){if(!e||t(r[n]))r[n]=i[n]})});return r}}return n}();var g=n.defaults=function(n){n=y(u,true);return n}({});var w=n.ajax=function(){function n(t){g(t,n.setting);var r=t.type,i=t.url,u=t.data,a=t.dataType,f=t.success,c=t.error,s=t.complete,l=t.xhr();l.onreadystatechange=function(){if(l.readyState!==4)return;var n;var t=l.status;if(t>=200&&t<300||t===304){n=l.responseText;try{if(a==="json")n=JSON.parse(n)}catch(n){}f(n,l)}else{c(l)}s(l)};if(r==="GET"){u=e(u);i+=i.indexOf("?")>-1?"&"+u:"?"+u}else{if(o(u))u=e(u)}l.open(r,i,true);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r==="GET"?l.send():l.send(u);return l}n.setting={type:"GET",success:i,error:i,complete:i,dataType:"json",data:{},xhr:function(){return new window.XMLHttpRequest},timeout:0};n.get=function(){return n(t.apply(null,arguments))};n.post=function(){var e=t.apply(null,arguments);e.type="POST";return n(e)};function t(n,t,e,r){if(p(t)){e=t;t={}}return{url:n,data:t,success:e,dataType:r}}function e(n){var t=[];m(n,function(n,e){t.push(e+"="+encodeURIComponent(n))});return t.join("&")}return n}();var S=n.extend=function(n){n=y(u);return n}({});var b=n.extendOwn=function(n){n=y(f);return n}({});var j=n.values=function(){function n(n){var t=[];m(n,function(n){t.push(n)});return t}return n}();var P=n.contain=function(){function n(n,t){if(!h(n))n=j(n);return a(n,t)>=0}return n}();var A=n.isMatch=function(){function n(n,t){var e=f(t),r=e.length;if(n==null)return!r;n=Object(n);for(var i=0;i<r;i++){var o=e[i];if(t[o]!==n[o]||!(o in n))return false}return true}return n}();var T=n.loadJs=function(){function n(n,t){var e=document.createElement("script");e.src=n;e.onload=function(){var n=e.readyState&&e.readyState!="complete"&&e.readyState!="loaded";t&&t(!n)};document.body.appendChild(e)}return n}();var x=n.matcher=function(){function n(n){n=b({},n);return function(t){return A(t,n)}}return n}();var O=n.now=function(n){n=Date.now||function(){return(new Date).getTime()};return n}({});var E=n.optimizeCb=function(){function n(n,e,r){if(t(e))return n;switch(r==null?3:r){case 1:return function(t){return n.call(e,t)};case 3:return function(t,r,i){return n.call(e,t,r,i)};case 4:return function(t,r,i,o){return n.call(e,t,r,i,o)}}return function(){return n.apply(e,arguments)}}return n}();var C=n.safeCb=function(n){n=function(n,t,e){if(n==null)return c;if(p(n))return E(n,t,e);if(o(n))return x(n);return function(n){return function(t){return t==null?undefined:t[n]}}};return n}({});var D=n.map=function(){function n(n,t,e){t=C(t,e);var r=!h(n)&&f(n),i=(r||n).length,o=Array(i);for(var u=0;u<i;u++){var a=r?r[u]:u;o[u]=t(n[a],a,n)}return o}return n}();var F=n.toArr=function(){function n(n){if(!n)return[];if(l(n))return n;if(h(n)&&!v(n))return D(n);return[n]}return n}();var N=n.Class=function(){function n(n,t){return r.extend(n,t)}function t(n,r,i){i=i||{};var o=function(){var n=F(arguments);return this.initialize?this.initialize.apply(this,n)||this:this};e(o,n);o.prototype.superclass=n;o.extend=function(n,e){return t(o,n,e)};o.inherits=function(n){e(n,o)};o.methods=function(n){S(o.prototype,n);return o};o.statics=function(n){S(o,n);return o};o.methods(r).statics(i);return o}var r=n.Base=t(Object,{className:"Base",callSuper:function(n,t,e){var r=n.prototype[t];if(!r)return;return r.apply(this,e)},toString:function(){return this.className}});return n}();var q=n.Select=function(n){n=N({className:"Select",initialize:function(n){this.length=0;if(!n)return this;if(v(n))return t.find(n);if(n.nodeType){this[0]=n;this.length=1}},find:function(n){var t=new q;this.each(function(){e(t,this.querySelectorAll(n))});return t},each:function(n){m(this,function(t,e){n.call(t,e,t)});return this}});var t=new n(document);function e(n,t){var e=t.length,r=n.length;for(var i=0;i<e;i++)n[r++]=t[i];n.length=r;return n}return n}({});var I=n.$safeEls=function(){function n(n){return F(v(n)?new q(n):n)}return n}();var z=n.delegate=function(n){function t(){return true}function e(){return false}function r(n){var t=this.events[n.type],e,r=i.call(this,n,t);n=new z.Event(n);var o=0,u,a,f;while((a=r[o++])&&!n.isPropagationStopped()){n.curTarget=a.el;u=0;while((e=a.handlers[u++])&&!n.isImmediatePropagationStopped()){f=e.handler.apply(a.el,[n]);if(f===false){n.preventDefault();n.stopPropagation()}}}}function i(n,t){var e=n.target,r=[],i=t.delegateCount,o,u,a,f;if(e.nodeType){for(;e!==this;e=e.parentNode||this){u=[];for(f=0;f<i;f++){a=t[f];o=a.selector+" ";if(u[o]===undefined){u[o]=P(this.querySelectorAll(o),e)}if(u[o])u.push(a)}if(u.length)r.push({el:e,handlers:u})}}if(i<t.length){r.push({el:this,handlers:t.slice(i)})}return r}n={add:function(n,t,e,i){var o={selector:e,handler:i},u;if(!n.events)n.events={};if(!(u=n.events[t])){u=n.events[t]=[];u.delegateCount=0;n.addEventListener(t,function(t){r.apply(n,arguments)},false)}e?u.splice(u.delegateCount++,0,o):u.push(o)},remove:function(n,t,e,r){var i=n.events;if(!i||!i[t])return;var o=i[t],u=o.length,a;while(u--){a=o[u];if((!e||a.selector==e)&&a.handler==r){o.splice(u,1);if(a.selector){o.delegateCount--}}}},Event:N({className:"Event",initialize:function n(t){this.origEvent=t},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e,preventDefault:function(){var n=this.origEvent;this.isDefaultPrevented=t;if(n&&n.preventDefault)n.preventDefault()},stopPropagation:function(){var n=this.origEvent;this.isPropagationStopped=t;if(n&&n.stopPropagation)n.stopPropagation()},stopImmediatePropagation:function(){var n=this.origEvent;this.isImmediatePropagationStopped=t;if(n&&n.stopImmediatePropagation)n.stopImmediatePropagation();this.stopPropagation()}})};return n}({});var R=n.$event=function(n){n={on:e("add"),off:e("remove")};function e(n){return function(e,r,i,o){e=I(e);if(t(o)){o=i;i=undefined}m(e,function(t){z[n](t,r,i,o)})}}return n}({});var k=n.raf=function(n){var t=window.requestAnimationFrame,e=window.cancelAnimationFrame;var r=0,i=["ms","moz","webkit","o"];for(var o=0,u=i.length;o<u&&!t;o++){t=window[i[o]+"RequestAnimationFrame"];e=window[i[o]+"CancelAnimationFrame"]||window[i[o]+"CancelRequestAnimationFrame"]}t=t||function(n){var t=O();var e=Math.max(0,16-(t-r)),i=setTimeout(function(){n(t+e)},e);r=t+e;return i};e=e||function(n){clearTimeout(n)};t.cancel=e;n=t;return n}({});return n});